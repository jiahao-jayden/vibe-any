---
title: 网站配置
description: 位于 src/config/core/website-config.tsx 的核心设置
---

import { Callout } from 'fumadocs-ui/components/callout'

`src/config/core/website-config.tsx` 汇总了全站核心配置。

## 结构

```ts
export const websiteConfig = {
  metadata: {
    /* 标题、主题、模式、图片、社交链接 */
  },
  i18n: {
    /* 默认语言与支持语言 */
  },
  monitoring: {
    /* 由环境变量推导：GA 与 Rollbar 可用性 */
  },
  blog: {
    /* 博客分页等 */
  },
  payment: {
    /* 支付提供商与积分套餐 */
  },
  planWithPrice: [
    /* 价格计划与 Stripe priceId */
  ],
}
```

### 元信息（metadata）与社交链接

| 字段 | 类型 | 作用 | 示例 |
| --- | --- | --- | --- |
| `theme.defaultTheme` | `'default'\| 'blue'\| 'green'\| 'amber'\| 'neutral'` | 站点默认配色主题 | `'default'` |
| `theme.enableSwitch` | `boolean` | 是否允许用户在 UI 中切换主题 | `true` |
| `mode.defaultMode` | `'system'\| 'light'\| 'dark'` | 默认明暗模式；`system` 跟随系统 | `'system'` |
| `mode.enableSwitch` | `boolean` | 是否允许用户在 UI 中切换明暗模式 | `true` |
| `images.ogImage` | `string` | 用于社交分享的 Open Graph 图片路径（相对 `/public`） | `'/og.avif'` |
| `images.logoLight` | `string` | 浅色模式 Logo 路径 | `'/logo.avif'` |
| `images.logoDark` | `string` | 深色模式 Logo 路径 | `'/logo-dark.avif'` |
| `social.github` | `string` | GitHub 链接 | `'https://github.com/VibeAny'` |
| `social.twitter` | `string` | X(Twitter) 链接 | `'https://x.com/VibeAny'` |
| `social.discord` | `string` | Discord 邀请链接 | `'https://discord.gg/xxxxxx'` |
| `social.youtube` | `string` | YouTube 频道链接 | `'https://www.youtube.com/@VibeAny'` |

示例：

```ts
metadata: {
  theme: {
    defaultTheme: 'default',
    enableSwitch: true,
  },
  mode: {
    defaultMode: 'system',
    enableSwitch: true,
  },
  images: {
    ogImage: '/og.avif',
    logoLight: '/logo.avif',
    logoDark: '/logo-dark.avif',
  },
  social: {
    github: 'https://github.com/VibeAny',
    twitter: 'https://x.com/VibeAny',
    discord: 'https://discord.gg/your-code',
    youtube: 'https://www.youtube.com/@VibeAny',
  },
}
```

### 国际化（i18n）

| 字段 | 类型 | 作用 | 示例 |
| --- | --- | --- | --- |
| `defaultLocale` | `'en'\| 'zh'` | 默认语言 | `'en'` |
| `locales` | `{ en: { name: string }, zh: { name: string } }` | 支持语言清单与展示名称 | `{ en: { name: 'English' }, zh: { name: '中文' } }` |

示例：

```ts
i18n: {
  defaultLocale: 'en',
  locales: {
    en: { name: 'English' },
    zh: { name: '中文' },
  },
}
```

### 监控（Monitoring）

监控分为“分析统计（GA）”与“错误上报（Rollbar）”，均由环境变量控制，并在代码里派生出开关。

环境变量：

| 变量 | 含义 |
| --- | --- |
| `NEXT_PUBLIC_GA_ID` | 配置即启用 GA |
| `NEXT_PUBLIC_ROLLBAR_ACCESS_TOKEN` | 配置即启用错误上报 |
| `NEXT_PUBLIC_ENABLE_GA_IN_DEV` | 开发环境启用 GA（`'true'` 时） |
| `NEXT_PUBLIC_ENABLE_ERROR_REPORTING_IN_DEV` | 开发环境启用错误上报（`'true'` 时） |

派生开关（由 `websiteConfig.monitoring` 计算得到）：

| 字段 | 类型 | 作用 |
| --- | --- | --- |
| `enableGoogleAnalytics` | `boolean` | 是否启用 GA |
| `enableErrorReporting` | `boolean` | 是否启用错误上报（Rollbar） |

<Callout type="info">生产环境：只要提供了对应 Token 即会启用；开发环境需显式打开对应的 `NEXT_PUBLIC_ENABLE_*_IN_DEV`。</Callout>

> 代码中可用 `shouldEnableGoogleAnalytics()` 与 `shouldEnableErrorReporting()` 自动处理 dev/production 差异。

---

### 邮件（Mail）

| 字段 | 类型 | 作用 | 示例 |
| --- | --- | --- | --- |
| `mail.provider` | `'resend'` | 邮件服务提供商 | `'resend'` |
| `mail.contact` | `string` | 联系邮箱地址（用于页脚或联系入口） | `'support@mksaas.com'` |

### 订阅（Newsletter）

| 字段 | 类型 | 作用 | 示例 |
| --- | --- | --- | --- |
| `newsletter.provider` | `'resend'` | 邮件订阅提供商 | `'resend'` |
| `newsletter.autoSubscribeAfterSignUp` | `boolean` | 新注册用户是否自动订阅 | `true` |

### 存储（Storage）

| 字段 | 类型 | 作用 | 示例 |
| --- | --- | --- | --- |
| `storage.provider` | `'s3'` | 存储提供商（S3/R2 兼容） | `'s3'` |

---

### 博客（Blog）

用于控制博客页的分页与“相关文章”数量。

| 字段 | 类型 | 作用 | 示例 |
| --- | --- | --- | --- |
| `blog.initialLoadSize` | `number` | 列表首屏加载文章数量 | `12` |
| `blog.relatedPostsSize` | `number` | 文章详情页“相关博文”数量 | `3` |

> 分页大小会影响首屏渲染性能与滚动体验，请结合内容体量调优。

---

### 支付（Payment）

| 字段 | 类型 | 作用 | 示例 |
| --- | --- | --- | --- |
| `payment.enabled` | `boolean` | 是否开启支付能力 | `true` |
| `payment.provider` | `'stripe' \| 'creem'` | 支付提供商 | `'stripe'` |
| `payment.credit.enabled` | `boolean` | 是否开启积分体系 | `false` |
| `payment.credit.allowFreeUserPurchaseCredits` | `boolean` | 免费用户是否可单独购买积分包 | `false` |
| `payment.credit.signupBonusCredits.enabled` | `boolean` | 是否开启注册赠送积分 | `false` |
| `payment.credit.signupBonusCredits.amount` | `number` | 赠送积分数量 | `0` |
| `payment.credit.signupBonusCredits.expireDays` | `number` | 赠送积分有效期（天） | `0` |

提供商环境变量映射：

- Stripe
  - 密钥：`NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY`、`STRIPE_SECRET_KEY`、`STRIPE_WEBHOOK_SECRET`
  - 价格/积分：`NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID`、`NEXT_PUBLIC_STRIPE_PRO_YEARLY_PRICE_ID`、`NEXT_PUBLIC_STRIPE_LIFETIME_PRICE_ID`、`NEXT_PUBLIC_STRIPE_100_CREDITS_PRICE_ID`、`NEXT_PUBLIC_STRIPE_200_CREDITS_PRICE_ID`
- Creem（可选）
  - 密钥：`CREEM_X_API_KEY`、`CREEM_TEST_MODE`、`CREEM_WEBHOOK_SECRET`
  - 产品/积分：`NEXT_PUBLIC_CREEM_PRO_MONTHLY_PRODUCT_ID`、`NEXT_PUBLIC_CREEM_LIFETIME_PRODUCT_ID`、`NEXT_PUBLIC_CREEM_100_CREDITS_PRODUCT_ID`、`NEXT_PUBLIC_CREEM_200_CREDITS_PRODUCT_ID`

### 价格计划（planWithPrice）

默认包含三类，可自行增删：

- `free`：免费计划
- `pro`：订阅（年/⽉）
- `lifetime`：买断一次性

对应的环境变量：

| 计划 | 环境变量 |
| ---- | --- |
| Pro 月付 | `NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID` |
| Pro 年付 | `NEXT_PUBLIC_STRIPE_PRO_YEARLY_PRICE_ID` |
| 终身买断 | `NEXT_PUBLIC_STRIPE_LIFETIME_PRICE_ID` |

字段结构说明（以 `pro` 为例）：

| 字段 | 类型 | 说明 | 示例 |
| --- | --- | --- | --- |
| `id` | `string` | 计划唯一 ID | `'pro'` |
| `planType` | `'subscription'\| 'one_time'\| 'lifetime'` | 计划类型 | `'subscription'` |
| `credit.amount` | `number` | 每周期附带积分 | `100` |
| `credit.expireDays` | `number` | 积分有效期（天） | `31` |
| `prices[]` | `Array` | 价格列表 | 见下 |

`prices[]` 每项：

| 字段 | 类型 | 说明 | 示例 |
| --- | --- | --- | --- |
| `type` | `'subscription'\| 'one_time'` | 定价类型 | `'subscription'` |
| `priceId` | `string` | Stripe Price ID | `process.env.NEXT_PUBLIC_STRIPE_PRO_MONTHLY_PRICE_ID!` |
| `amount` | `number` | 金额（分/整数单位，按代码实际含义） | `990` |
| `currency` | `string` | 货币 | `'USD'` |
| `interval` | `'month'\| 'year'` | 订阅周期（订阅价才需要） | `'month'` |

### 积分套餐（可选）

若在 `payment.credit.packages` 下定义，会以“一次性积分包”形式展示。每个套餐包含：

- `id`
- `credit.amount`、`credit.expireDays`
- `price.priceId`、`price.amount`、`price.currency`

可使用 `config/features/payment-config.tsx` 中的辅助方法进行展示转换。


