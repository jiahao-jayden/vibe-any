---
title: Analytics System
description: Unified multi-platform analytics tracking system
---

import { Callout } from 'fumadocs-ui/components/callout'

# Analytics System

A powerful unified analytics tracking system that supports multiple platforms simultaneously. Track user behavior, conversions, and custom events across 8+ analytics providers with a single API.

<Callout type="info">
The analytics system follows a "configure and enable" approach - only the platforms you configure will receive data.
</Callout>

> Hooks live in `src/hooks/use-analytics`. Providers are enabled by environment variables only.

## Key Features

### Multi-Platform Synchronization (＾▽＾)
```typescript
// One call, multiple platforms
const { track } = useAnalytics()
track('button_click', { button_name: 'subscribe' })
// → Automatically sent to all configured platforms
```

### Fault Tolerance (・ω・)
- Provider failures don't affect other platforms
- Graceful degradation in SSR environments
- Silent error handling

### Type Safety (￣▽￣)
- Full TypeScript support
- Autocomplete for event properties
- Compile-time error checking

### Performance Optimized (｀・ω・´)
- Dynamic imports for code splitting
- useCallback optimization
- Minimal bundle impact

## Setup and Configure

<div className="fd-steps">
  <div className="fd-step">
    ### 1) Add environment variables
    Add only the providers you use to `.env` (unconfigured ones stay disabled).
    ```bash
    NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX
    NEXT_PUBLIC_POSTHOG_KEY=phc_xxxxxxxxxxxx
    NEXT_PUBLIC_PLAUSIBLE_DOMAIN=yourdomain.com
    # ...others as needed
    ```
  </div>
  <div className="fd-step">
    ### 2) Render once
    Ensure the analytics bootstrap is mounted in your app layout (already wired in this project).
  </div>
  <div className="fd-step">
    ### 3) Track events
    Use hooks from `@/hooks/use-analytics` in client components.

    ```ts
    import { useAnalytics, useAnalyticsEvents } from '@/hooks/use-analytics'
    const { track, identify, pageView } = useAnalytics()
    const events = useAnalyticsEvents()
    ```
  </div>
  <div className="fd-step">
    ### 4) Verify
    Trigger a test event and confirm it appears on your provider dashboards.
  </div>
</div>

## Supported Events

Use these common calls. Implement only what you need.

### Core Tracking Functions
- `track(eventName, properties)` - Generic event tracking
- `identify(userId, traits)` - User identification
- `pageView(title, path)` - Page view tracking

### Specialized Event Helpers
- `click(element, location)` - Button/link clicks
- `formSubmit(formName)` - Form submissions
- `fileDownload(fileName)` - File download (interaction)
- `externalLink(url)` - External link
- `signUp(method)` - User registrations
- `login(method)` - User login
- `purchase(value, currency)` - Purchase conversion
- `videoPlay(title)` - Video playback
- `searchLegacy(term)` - Legacy search event
- `aiChatSession(model, count)` - AI session summary
- `featureUsage(name)` - Feature usage
- `pageDwell(url, ms)` - Page dwell time
- `error(error, context)` - Error tracking
- `performance(metric, value, unit?)` - Performance metric
- `search(query, results?)` - Search
- `download(fileName, fileType?, fileSize?)` - Unified download event

## FAQ

**Q: Events are not being sent. What should I check?**  
**A:** Verify tokens in `.env.local` (e.g., `NEXT_PUBLIC_GA_ID`, `NEXT_PUBLIC_POSTHOG_KEY`). Only configured platforms receive data. Also ensure calls happen on the client via `useAnalytics()`/`useAnalyticsEvents()` (＞﹏＜).

**Q: How to track page views?**  
**A:** Call `useAnalytics().pageView(title, path)` on layout init or route change. In App Router, invoke it once in a top-level layout/template to avoid duplicates (＾_＾).

**Q: How to avoid duplicate click events?**  
**A:** Add dedupe keys or throttle/debounce on the client. For forms, track after successful submission to reduce noise (=^_^=).

**Q: How to add a new analytics provider?**  
**A:** Extend the unified facade (see `@/components/analytics/track`) and gate with env flags. Keep the same `track/identify/pageView` interface so app code remains unchanged (・∀・).

**Q: Privacy and consent?**  
**A:** Unconfigured providers are disabled by default. For consent-first flows, initialize providers or call `track`/`identify` only after consent. Never send sensitive data; sanitize where needed (￣ー￣).

**Q: How to track purchases?**  
**A:** Use `useAnalyticsEvents().purchase(value, currency)` or `conversion('purchase', value, currency)`. For reliable attribution, trigger after server-side validation or webhook completion (＾▽＾).

{/* Simplified: removed deep links; this page is now the single entry. */}
